(function(){"use strict";self.onmessage=_=>{const{dataHeaders:l,keyHEaders:n,mappedKey:j,subjectWiseMarking:e,ctx:d,headers:k}=_.data;let g=[];for(let t=1;t<l.length;t++){t%15===0&&self.postMessage({type:"progress",processedData:t});let o=+d.paperMarkings.start,h=+o+ +d.paperMarkings.end-1,c=0,i=0,p=0,M=+d.paperMarkings.correctPoint,$=+d.paperMarkings.wrongPoint,A=1,m=!1;for(let a=1;a<n.length;a++)if(l[t][j]==n[a][j]){m=!0;let w=0,f={};for(;w<n[0].length;){let s=n[0][w];f={...f,[s]:l[t][s]},w++}if(e.length>0){let s={},P=0;for(let r=0;r<e.length;r++){t==1&&A==1&&k.push(`${e[r].subject}_notAttempted`,`${e[r].subject}_Correct`,`${e[r].subject}_wrongAnswer`,`${e[r].subject}_total`),o=+e[r].start,h=+e[r].end,c=0,i=0,p=0;let b=0;for(;o<=h;){let u=n[0][o];l[t][u]==""||n[a][u]==""?p++:n[a][u]==l[t][u]?c++:n[a][u]!=l[t][u]&&i++,o++}b=c*+e[r].correctPoint-+i*+e[r].wrongPoint,P+=b,s={...s,[`${e[r].subject}_notAttempted`]:p,[`${e[r].subject}_Correct`]:c,[`${e[r].subject}_wrongAnswer`]:i,[`${e[r].subject}_total`]:b,total:P}}A++,g.push({...s,...f})}else{for(;o<=h;){let s=n[0][o];l[t][s]==""?p++:n[a][s]==l[t][s]?c++:n[a][s]!=l[t][s]&&i++,o++}g.push({...f,notAttempted:p,wrongAnswer:i,correctAnswer:c,total_Score:c*M-i*$,remark:"ok"})}break}if(!m){const a={...l[t],remark:"mapped key not match"};g.push(a)}}self.postMessage({type:"result",headersData:k,finalAnswers:g})}})();
